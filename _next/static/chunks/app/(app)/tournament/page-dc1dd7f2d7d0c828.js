(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[621],{87724:function(e,t,n){Promise.resolve().then(n.bind(n,40667))},1307:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(28754),s=n(26371);let{cardWidth:i,rowGapPixels:l}=n(4619).default.bracketDisplay;function o(e){let{bracket:t}=e;return(0,r.jsx)(s.kC,{direction:"column",gap:"0",children:t.map((e,n)=>{let o=2**(t.length-n-2),a=[(0,r.jsx)(s.kC,{direction:"row",justify:"center",gap:l+"px",children:e.map((a,c)=>{let x=i+"px",u=[(0,r.jsx)(s.xu,{style:{minWidth:x,maxWidth:x,borderColor:1==a.result?"var(--grass-10)":-1==a.result?"var(--red-10)":2==a.result?"var(--yellow-10)":"var(--gray-5)",borderWidth:"2px",borderRadius:"var(--radius-4)",padding:"1px",textAlign:"center"},children:a.name?(0,r.jsx)(s.xv,{children:a.name}):(0,r.jsx)(s.xv,{children:"\xa0"})},crypto.randomUUID())];if(c!=e.length-1&&n<t.length-1){if(n<t.length-2){let e=i*(2*o-1)+l*(2*o-2)+"px";u.push((0,r.jsx)(s.xu,{minWidth:e,maxWidth:e},crypto.randomUUID()))}else{let e=i+"px";u.push((0,r.jsx)(s.xu,{minWidth:e,maxWidth:e},crypto.randomUUID()))}}return u})},crypto.randomUUID())];if(n!=t.length-1){let e=[],c=t[n+1],x=i*o+l*o,u=i*o+l*(o-2);for(let t=0;t<c.length-1;t++)if(t%2==0){let t=x+"px";e.push((0,r.jsxs)(s.xu,{style:{minWidth:t,maxWidth:t},className:"text-center",children:[(0,r.jsx)(s.xu,{width:"2px",height:"6px",className:"bg-[var(--accent-10)] mx-auto"}),(0,r.jsx)(s.xu,{width:"100%",height:"6px",className:"border-t-2 border-x-2 rounded-t-lg border-[var(--accent-10)]"})]},crypto.randomUUID()))}else{let t=u+"px";e.push((0,r.jsx)(s.xu,{style:{minWidth:t,maxWidth:t}},crypto.randomUUID()))}a.push((0,r.jsx)(s.kC,{direction:"row",justify:"center",gap:l+"px",children:e},crypto.randomUUID()))}return a})})}},34626:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(28754),s=n(26371);function i(e){let{tournament:t,match:n,onClick:i,hasClickReminder:l}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.kC,{justify:"center",children:(0,r.jsx)(s.X6,{children:n.name+(l?" (Click on the team that won)":"")})}),(0,r.jsx)(s.xu,{height:"24px"}),(0,r.jsx)(s.kC,{gap:"3",justify:"center",children:n.teams.map(e=>{let n;if("bracket"==t.type)n=t.data[e.rowI][e.columnI].result;else if("roundRobin"==t.type){let r=t.data[e.rowI][e.columnI].result;n=0==r?0:1==r&&"top"==e.side||-1==r&&"left"==e.side?1:-1}return(0,r.jsxs)(s.xu,{style:{borderColor:1==n?"var(--grass-10)":-1==n?"var(--red-10)":"var(--gray-5)",borderWidth:"2px",borderRadius:"var(--radius-4)",padding:"10px",textAlign:"center"},onClick:i?()=>{i(e)}:null,children:[(0,r.jsx)(s.X6,{children:e.name}),(0,r.jsx)(s.xu,{height:"2px"}),(0,r.jsx)(s.xv,{children:e.description}),(0,r.jsx)(s.xu,{height:"10px"}),e.players.map((t,n)=>(0,r.jsx)(s.xv,{children:(0==n?"Players: ":"")+t+(n!=e.players.length-1?", ":"")},t))]},crypto.randomUUID())})})]})}},29781:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(28754),s=n(26371),i=n(42123);function l(e){let{schema:t,schemaOptions:n={},options:l,setOptions:o}=e,[a,c]=(0,i.useState)({});function x(e,t){c({...a,[e]:t})}function u(e,t){o({...l,[e]:t})}(0,i.useEffect)(()=>{let e={};for(let[n,r]of Object.entries(t))l[n]&&(e[n]=l[n]);c(e)},[l,t]);let d=[];for(let[e,i]of Object.entries(t)){var h,p;let t=null!==(h=n[e])&&void 0!==h?h:{};d.push((0,r.jsxs)(s.FR.ck,{align:"center",children:[(0,r.jsxs)(s.FR.__,{children:[t.name?t.name:e," ",t.icon?(0,r.jsxs)(r.Fragment,{children:["\xa0\xa0 ",t.icon]}):null]}),(0,r.jsx)(s.FR.B4,{children:"text"==i?(0,r.jsx)(s.nv.Root,{value:l[e],onChange:t=>u(e,t.target.value)}):"dropdown"==i?(0,r.jsxs)(s.Ph.Root,{onValueChange:t=>u(e,t),value:l[e],children:[(0,r.jsx)(s.Ph.Trigger,{}),(0,r.jsx)(s.Ph.Content,{children:t.items?t.items.map((e,t)=>(0,r.jsx)(s.Ph.Item,{value:t,children:e},crypto.randomUUID())):null})]}):"switch"==i?(0,r.jsx)(s.rs,{onCheckedChange:t=>u(e,t),checked:l[e]}):"number"==i?(0,r.jsx)(s.nv.Root,{value:null!==(p=a[e])&&void 0!==p?p:"",onChange:t=>{let n=t.target.value;x(e,n);let r=parseFloat(n);r&&u(e,r)},onBlur:()=>{x(e,l[e])}}):null})]},e))}return(0,r.jsx)(s.FR.fC,{children:d})}},82238:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(28754),s=n(1307),i=n(26371);let{cardWidth:l,rowGapPixels:o}=n(4619).default.bracketDisplay;function a(e){let{roundRobin:t}=e;return(0,r.jsx)(i.kC,{gap:"3",direction:"column",children:t.map(e=>(0,r.jsx)(i.kC,{gap:"3",direction:"row",justify:"center",children:e.map(e=>{let t=l+"px";return(0,r.jsx)(i.xu,{style:{minWidth:t,maxWidth:t,borderColor:-2==e.result?"gray":1==e.result?"var(--grass-10)":-1==e.result?"var(--red-10)":2==e.result?"var(--yellow-10)":"var(--gray-5)",borderWidth:"2px",borderRadius:"var(--radius-4)",padding:"1px",textAlign:"center",visibility:-3==e.result?"hidden":void 0,backgroundColor:-2==e.result?"gray":void 0},children:e.name?(0,r.jsx)(i.xv,{children:e.name}):(0,r.jsx)(i.xv,{children:"\xa0"})},crypto.randomUUID())})},crypto.randomUUID()))})}function c(e){let{tournament:t}=e;return"bracket"==t.type?(0,r.jsx)(s.Z,{bracket:t.data}):"roundRobin"==t.type?(0,r.jsx)(a,{roundRobin:t.data}):void 0}},40667:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var r=n(28754),s=n(26371);n(1307);var i=n(34626),l=n(57784),o=n(42123),a=n(33356),c=n(14091),x=n(91809),u=n(74587),d=n(82238),h=n(4619),p=n(29781);let{widthPercent:m,scale:j}=h.default.tournament;function g(){let e=(0,u.useRouter)(),[t,n]=(0,o.useState)(0),[h,g]=(0,o.useState)(0),[f,b]=(0,o.useState)(0),[v,C]=(0,o.useState)(!1),[k,y]=(0,o.useState)(null),[w,R]=(0,o.useState)(null),[S,P]=(0,o.useState)(null),[F,U]=(0,o.useState)(null);function z(e){b(e),F&&F.setProblemI(e)}let[I,Z,q]=(0,c.J7)(),V={name:"Tournament",problemSet:null,time:!1,timeSecondsRaw:"",timeSeconds:0,fillEmpty:!1,shuffleProblems:!1},[W,_]=(0,c.Ku)("tournament",{options:V},e=>{if(!e.options){let t=structuredClone(e);t.options=V,_(t)}});function D(e,t){let n=structuredClone(W);n.options[e]=t,N(n)}let T=(0,o.useRef)(),E=(0,o.useRef)(),A=(0,o.useRef)();function N(e){_(e),window.history.pushState(null,"","?tournament="+(0,c.Fc)(e))}function O(e){let t=structuredClone(W);if("bracket"==t.type){if((0,c.$u)(t,e.rowI,e.columnI),W.options.fillEmpty){let n=S+h;if(n<t.data[t.data.length-1].length){let r=(0,c.WZ)(t.data,e.rowI,e.columnI);t.data[t.data.length-1][n].name=r.name}}}else"roundRobin"==W.type&&(0,c.jT)(t,e.rowI,e.columnI,e.side);N(t)}(0,o.useEffect)(()=>{window.onkeydown=e=>{let n=e.key;v?"ArrowLeft"==n?T.current.click():"ArrowRight"==n&&E.current.click():0==t&&"ArrowRight"==n&&A.current.click()},window.setProblemI=b},[v,t,b]);let[B,L]=(0,o.useState)({problemSet:W.options.problemSet,sort:0,widthMul:2,heightMul:2});return W&&W.options?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.kC,{className:"fixed right-[72px] bottom-12 z-[999]",gap:"3",display:v?"flex":"none",children:[(0,r.jsx)(s.zx,{ref:T,variant:"outline",onClick:()=>{1==t?0==h?(C(!1),n(0)):(g(h-1),z(f-1),n(3)):2==t?(n(1),I.end()):3==t?(I.play(),n(2)):4==t&&n(3)},children:(0,r.jsx)(x.wyc,{})}),(0,r.jsx)(s.zx,{ref:E,variant:"outline",onClick:()=>{if(1==t)W.options.time&&I.start(W.options.timeSeconds),n(t+1);else if(2==t)I.pause(),n(t+1);else if(3==t){if(I.end(),h+1==w.totalMatches)n(4);else{if(!w.matches[h+1]){let e=(0,c.OE)(W);if(!e.matches[h+1]){alert("No more matches left, but there should be more matches...");return}R(e)}if(!k[f+1]){alert("No more problems left, ran out of problems...");return}n(1),g(h+1),z(f+1)}}},children:(0,r.jsx)(x.XCv,{})})]}),0==t?(0,r.jsxs)(r.Fragment,{children:[W.data?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{tournament:W}),(0,r.jsx)(s.xu,{height:"12px"}),(0,r.jsxs)(s.kC,{justify:"center",gap:"3",children:[(0,r.jsxs)(s.zx,{variant:"outline",onClick:()=>{e.push("/tournament/editor?tournament="+(0,c.Fc)(W))},children:[(0,r.jsx)(x.JtS,{})," Edit tournament"]}),(0,r.jsxs)(s.zx,{variant:"outline",onClick:()=>{N((0,c.AJ)(W))},children:[(0,r.jsx)(x.X5P,{})," Reset tournament"]})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.xv,{children:"Create a tournament by going to "}),(0,r.jsx)(s.rU,{href:"/AtomicPractice/tournament/editor",children:"/tournament/editor"}),(0,r.jsx)(s.xv,{children:"!"})]}),(0,r.jsx)(s.xu,{height:"12px"}),(0,r.jsx)(s.Z0,{size:"4"}),(0,r.jsx)(s.xu,{height:"12px"}),(0,r.jsx)(s.xv,{children:"Options"}),(0,r.jsx)(s.xu,{height:"6px"}),(0,r.jsxs)(s.FR.fC,{children:[(0,r.jsxs)(s.FR.ck,{align:"center",children:[(0,r.jsxs)(s.FR.__,{children:["Tournament name \xa0\xa0 ",(0,r.jsx)(x.JtS,{})]}),(0,r.jsx)(s.FR.B4,{children:(0,r.jsx)(s.nv.Root,{value:W.options.name,onChange:e=>D("name",e.target.value)})})]}),(0,r.jsxs)(s.FR.ck,{align:"center",children:[(0,r.jsxs)(s.FR.__,{children:["Problem set \xa0\xa0 ",(0,r.jsx)(x.zPP,{})]}),(0,r.jsx)(s.FR.B4,{children:(0,r.jsxs)(s.Ph.Root,{onValueChange:e=>{D("problemSet",e)},value:W.options.problemSet,disabled:null!=w,children:[(0,r.jsx)(s.Ph.Trigger,{}),(0,r.jsx)(s.Ph.Content,{children:a.Z.problemSets.map((e,t)=>(0,r.jsx)(s.Ph.Item,{value:t,children:(0,c.LV)(e)},crypto.randomUUID()))})]})})]}),(0,r.jsxs)(s.FR.ck,{align:"center",children:[(0,r.jsxs)(s.FR.__,{children:["Time \xa0\xa0 ",(0,r.jsx)(x.kLo,{})]}),(0,r.jsx)(s.FR.B4,{children:(0,r.jsxs)(s.kC,{gap:"3",align:"center",children:[(0,r.jsx)(s.rs,{onCheckedChange:e=>D("time",e),checked:W.options.time}),W.options.time?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.nv.Root,{size:"2",value:W.options.timeSecondsRaw,onChange:e=>{let t=e.target.value,n=structuredClone(W),r=n.options;r.timeSecondsRaw=t;let s=parseFloat(t);s&&(r.timeSeconds=s),N(n)},onBlur:()=>{D("timeSecondsRaw",W.options.timeSeconds)}}),(0,r.jsx)(s.xv,{size:"2",children:"seconds"})]}):null]})})]}),(0,r.jsxs)(s.FR.ck,{children:[(0,r.jsxs)(s.FR.__,{children:["Shuffle problems \xa0\xa0 ",(0,r.jsx)(x.jH6,{})]}),(0,r.jsx)(s.FR.B4,{children:(0,r.jsx)(s.rs,{onCheckedChange:e=>D("shuffleProblems",e),checked:W.options.shuffleProblems,disabled:null!=w})})]}),W&&"bracket"==W.type?(0,r.jsxs)(s.FR.ck,{children:[(0,r.jsxs)(s.FR.__,{children:["Fill empty spots with eliminated players \xa0\xa0 ",(0,r.jsx)(x.yr4,{})]}),(0,r.jsx)(s.FR.B4,{children:(0,r.jsx)(s.rs,{onCheckedChange:e=>D("fillEmpty",e),checked:W.options.fillEmpty})})]}):null]}),(0,r.jsx)(s.xu,{height:"12px"}),(0,r.jsxs)(s.kC,{gap:"3",children:[(0,r.jsxs)(s.Vq.Root,{children:[(0,r.jsx)(s.Vq.Trigger,{children:(0,r.jsxs)(s.zx,{variant:"outline",children:[(0,r.jsx)(x.zPP,{})," View rules"]})}),(0,r.jsxs)(s.Vq.Content,{children:[(0,r.jsx)(s.Vq.Title,{className:"text-center",children:"Rules"}),(0,r.jsx)(s.Vq.Description,{className:"whitespace-pre-wrap",children:W.options.problemSet?a.Z.problemSets[W.options.problemSet].rules:""}),(0,r.jsx)(s.kC,{justify:"end",children:(0,r.jsx)(s.Vq.Close,{children:(0,r.jsx)(s.zx,{variant:"outline",children:"Close"})})})]})]}),(0,r.jsxs)(s.Vq.Root,{children:[(0,r.jsx)(s.Vq.Trigger,{children:(0,r.jsxs)(s.zx,{variant:"outline",children:[(0,r.jsx)(x.aAW,{})," Print"]})}),(()=>{let e={problemSet:{name:"Problem Set",icon:(0,r.jsx)(x.zPP,{}),items:a.Z.problemSets.map(e=>(0,c.LV)(e))},sort:{name:"Problem Set",icon:(0,r.jsx)(x.jnn,{}),items:["Ascending","Tournament (easy to prepare)"]},widthMul:{name:"Problems in a row per page",icon:(0,r.jsx)(x.LZ3,{})},heightMul:{name:"Problems in a column per page",icon:(0,r.jsx)(x.veu,{})}};return(0,r.jsxs)(s.Vq.Content,{children:[(0,r.jsx)(p.Z,{schema:{problemSet:"dropdown",sort:"dropdown",widthMul:"number",heightMul:"number"},schemaOptions:e,options:B,setOptions:L}),(0,r.jsx)(s.xu,{height:"12px"}),(0,r.jsx)(s.zx,{variant:"outline",onClick:()=>{(0,c.ZV)(B)},children:"Print"})]})})()]}),(0,r.jsxs)(s.zx,{variant:"outline",onClick:()=>{null===W.options.problemSet?alert("Problem set is required"):(0,c.dA)(W.options.problemSet)},children:[(0,r.jsx)(x.zPP,{})," Print answers"]}),(0,r.jsxs)(s.zx,{variant:"outline",onClick:()=>{null===W.options.problemSet?alert("Problem set is required"):U((0,c.pO)(W.options.problemSet))},children:[(0,r.jsx)(x.zPP,{})," Open answers in a popup"]}),(0,r.jsxs)(s.zx,{ref:A,variant:"outline",onClick:()=>{null===W?alert("Tournament is required"):null===W.options.problemSet?alert("Problem set is required"):(null==w&&(R((0,c.OE)(W)),y((0,c.u_)(a.Z.problemSets[W.options.problemSet].problems,W.options.shuffleProblems)),W.options.fillEmpty&&P((0,c.dX)(W.data))),C(!0),n(1))},children:[(0,r.jsx)(x.o1U,{})," Start"]})]})]}):1==t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{tournament:W,match:w.matches[h],onClick:O}),(0,r.jsx)(s.xu,{height:"12px"}),(0,r.jsx)(s.Z0,{size:"4"}),(0,r.jsx)(s.xu,{height:"12px"}),(0,r.jsx)(d.Z,{tournament:W})]}):2==t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{tournament:W,match:w.matches[h],onClick:O}),W.options.time?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.xu,{height:"12px"}),(0,r.jsx)(s.Z0,{size:"4"}),(0,r.jsx)(s.xu,{height:"12px"}),(0,r.jsxs)(s.kC,{gap:"3",justify:"center",children:[(0,r.jsx)(s.X6,{children:Z}),(0,r.jsx)(s.hU,{variant:"outline",onClick:q?I.pause:I.play,children:q?(0,r.jsx)(x.fpf,{}):(0,r.jsx)(x.o1U,{})}),(0,r.jsx)(s.hU,{variant:"outline",onClick:I.reset,children:(0,r.jsx)(x.BGW,{})})]})]}):null,(0,r.jsx)(s.xu,{height:"12px"}),(0,r.jsx)(s.Z0,{size:"4"}),(0,r.jsx)(s.xu,{height:"12px"}),(0,r.jsx)(l.Z,{textPrefix:"Problem ",problemPart:k[f].question,widthPercent:m,scale:j})]}):3==t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{tournament:W,match:w.matches[h],onClick:O,hasClickReminder:!0}),(0,r.jsx)(s.xu,{height:"12px"}),(0,r.jsx)(s.Z0,{size:"4"}),(0,r.jsx)(s.xu,{height:"12px"}),(0,r.jsx)(l.Z,{textPrefix:"Solution ",problemPart:k[f].answer,widthPercent:m,scale:j})]}):4==t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.kC,{justify:"center",children:(0,r.jsx)(s.X6,{children:"Winner: "+(0,c.tA)(W).name})}),(0,r.jsx)(s.xu,{height:"48px"}),(0,r.jsx)(d.Z,{tournament:W}),(0,r.jsx)(s.xu,{height:"48px"}),(0,r.jsx)(s.kC,{justify:"center",children:(0,r.jsxs)(s.Vq.Root,{children:[(0,r.jsx)(s.Vq.Trigger,{children:(0,r.jsxs)(s.zx,{variant:"outline",children:[(0,r.jsx)(x.rLr,{})," Share results!"]})}),(0,r.jsxs)(s.Vq.Content,{children:[(0,r.jsx)(s.Vq.Title,{children:"Share results!"}),(0,r.jsx)(s.Vq.Description,{children:"Here is the link to the results page."}),(0,r.jsx)(s.xu,{height:"12px"}),(0,r.jsx)(s.kC,{justify:"center",children:(0,r.jsxs)(s.zx,{variant:"outline",onClick:()=>{let e;navigator.clipboard.writeText((e=new URL(window.location.href)).host+e.pathname+"/results?tournament="+(0,c.Fc)(W))},children:[(0,r.jsx)(x.dqY,{})," Copy results URL"]})})]})]})})]}):null]}):null}}},function(e){e.O(0,[545,547,323,999,853,739,185,163,146,672,744],function(){return e(e.s=87724)}),_N_E=e.O()}]);