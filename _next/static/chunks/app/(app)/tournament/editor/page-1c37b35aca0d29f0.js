(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[682],{64679:function(e,t,n){Promise.resolve().then(n.bind(n,74854))},1307:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(28754),a=n(26371);let{cardWidth:i,rowGapPixels:s}=n(4619).default.bracketDisplay;function l(e){let{bracket:t}=e;return(0,r.jsx)(a.kC,{direction:"column",gap:"0",children:t.map((e,n)=>{let l=2**(t.length-n-2),o=[(0,r.jsx)(a.kC,{direction:"row",justify:"center",gap:s+"px",children:e.map((o,c)=>{let d=i+"px",u=[(0,r.jsx)(a.xu,{style:{minWidth:d,maxWidth:d,borderColor:1==o.result?"var(--grass-10)":-1==o.result?"var(--red-10)":2==o.result?"var(--yellow-10)":"var(--gray-5)",borderWidth:"2px",borderRadius:"var(--radius-4)",padding:"1px",textAlign:"center"},children:o.name?(0,r.jsx)(a.xv,{children:o.name}):(0,r.jsx)(a.xv,{children:"\xa0"})},crypto.randomUUID())];if(c!=e.length-1&&n<t.length-1){if(n<t.length-2){let e=i*(2*l-1)+s*(2*l-2)+"px";u.push((0,r.jsx)(a.xu,{minWidth:e,maxWidth:e},crypto.randomUUID()))}else{let e=i+"px";u.push((0,r.jsx)(a.xu,{minWidth:e,maxWidth:e},crypto.randomUUID()))}}return u})},crypto.randomUUID())];if(n!=t.length-1){let e=[],c=t[n+1],d=i*l+s*l,u=i*l+s*(l-2);for(let t=0;t<c.length-1;t++)if(t%2==0){let t=d+"px";e.push((0,r.jsxs)(a.xu,{style:{minWidth:t,maxWidth:t},className:"text-center",children:[(0,r.jsx)(a.xu,{width:"2px",height:"6px",className:"bg-[var(--accent-10)] mx-auto"}),(0,r.jsx)(a.xu,{width:"100%",height:"6px",className:"border-t-2 border-x-2 rounded-t-lg border-[var(--accent-10)]"})]},crypto.randomUUID()))}else{let t=u+"px";e.push((0,r.jsx)(a.xu,{style:{minWidth:t,maxWidth:t}},crypto.randomUUID()))}o.push((0,r.jsx)(a.kC,{direction:"row",justify:"center",gap:s+"px",children:e},crypto.randomUUID()))}return o})})}},82238:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(28754),a=n(1307),i=n(26371);let{cardWidth:s,rowGapPixels:l}=n(4619).default.bracketDisplay;function o(e){let{roundRobin:t}=e;return(0,r.jsx)(i.kC,{gap:"3",direction:"column",children:t.map(e=>(0,r.jsx)(i.kC,{gap:"3",direction:"row",justify:"center",children:e.map(e=>{let t=s+"px";return(0,r.jsx)(i.xu,{style:{minWidth:t,maxWidth:t,borderColor:-2==e.result?"gray":1==e.result?"var(--grass-10)":-1==e.result?"var(--red-10)":2==e.result?"var(--yellow-10)":"var(--gray-5)",borderWidth:"2px",borderRadius:"var(--radius-4)",padding:"1px",textAlign:"center",visibility:-3==e.result?"hidden":void 0,backgroundColor:-2==e.result?"gray":void 0},children:e.name?(0,r.jsx)(i.xv,{children:e.name}):(0,r.jsx)(i.xv,{children:"\xa0"})},crypto.randomUUID())})},crypto.randomUUID()))})}function c(e){let{tournament:t}=e;return"bracket"==t.type?(0,r.jsx)(a.Z,{bracket:t.data}):"roundRobin"==t.type?(0,r.jsx)(o,{roundRobin:t.data}):void 0}},4619:function(e,t){"use strict";t.default={bracketDisplay:{cardWidth:50,rowGapPixels:16},print:{widthPercent:90,scaleMul:.7},printAnswers:{widthPercent:90,scale:2,answerFullScale:1},tournament:{widthPercent:50,scale:2},practice:{widthPercent:50,scale:2},admin:{widthPercent:50,scale:2}}},74854:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var r=n(28754),a=n(26371);n(1307);var i=n(14091),s=n(42123),l=n(91809),o=n(74587),c=n(82238),d=n(4619);let{cardWidth:u,rowGapPixels:x}=d.default.bracketDisplay;function h(e){let{tournament:t,players:n,setPlayers:s,setTournament:o}=e,c=t.data;return(0,r.jsx)(a.kC,{justify:"center",gap:x+"px",children:c.length>0?c[c.length-1].map(e=>(0,r.jsx)(a.hU,{variant:"outline",color:"red",style:{minWidth:u,maxWidth:u},onClick:()=>{let r=n.indexOf(e.name),a=structuredClone(n);a.splice(r,1),s(a),t.type="bracket",o((0,i.E6)(t,a))},children:(0,r.jsx)(l.ypG,{})},crypto.randomUUID())):null})}let{cardWidth:p,rowGapPixels:j}=d.default.bracketDisplay;function m(e){let{tournament:t,players:n,setPlayers:s,setTournament:o}=e,c=t.data;return(0,r.jsx)(a.kC,{justify:"center",gap:"3",children:c.length>0?c[0].slice(1,c.length-1).map(e=>(0,r.jsx)(a.hU,{variant:"outline",color:"red",style:{minWidth:p,maxWidth:p},onClick:()=>{let r=n.indexOf(e.name),a=structuredClone(n);a.splice(r,1),s(a),t.data="roundRobin",o((0,i.E6)(t,a))},children:(0,r.jsx)(l.ypG,{})},crypto.randomUUID())):null})}function y(e){let{tournament:t,players:n,setPlayers:a,setTournament:i}=e;return"bracket"==t.type?(0,r.jsx)(h,{tournament:t,players:n,setPlayers:a,setTournament:i}):"roundRobin"==t.type?(0,r.jsx)(m,{tournament:t,players:n,setPlayers:a,setTournament:i}):void 0}function g(e){let{team:t,children:n}=e;return(0,r.jsxs)(a.Zb,{children:[(0,r.jsx)(a.X6,{className:"text-center",children:t.name}),t.description?(0,r.jsx)(a.xv,{children:t.description}):(0,r.jsx)(r.Fragment,{}),(0,r.jsxs)(a.rj,{columns:"2",gap:"1",children:[(0,r.jsx)(a.xv,{children:"Players:"}),t.players.map(e=>(0,r.jsx)(a.xv,{children:e},e))]}),n]})}function v(e){let{tournament:t,setTournament:n}=e,[i,o]=(0,s.useState)(""),[c,d]=(0,s.useState)("");function u(e){n({...t,teams:e})}function x(){let e=structuredClone(t.teams),n=!1;for(let t=0;t<e.length;t++)if(e[t].name==c){n=t;break}!1===n?e.push({name:c,description:"",players:[i]}):e[n].players.push(i),o(""),u(e)}let h=(0,s.useRef)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.kC,{gap:"3",children:[(0,r.jsx)(a.nv.Root,{placeholder:"Team name…",value:c,onChange:e=>{d(e.target.value)},onKeyDown:e=>{"Enter"==e.key&&h.current.focus()},children:(0,r.jsx)(a.nv.Slot,{children:(0,r.jsx)(l.JtS,{})})}),(0,r.jsx)(a.nv.Root,{ref:h,placeholder:"Add player…",value:i,onChange:e=>{o(e.target.value)},onKeyDown:e=>{"Enter"==e.key&&x()},children:(0,r.jsx)(a.nv.Slot,{children:(0,r.jsx)(l.Tk0,{})})}),(0,r.jsxs)(a.zx,{variant:"outline",onClick:x,children:[(0,r.jsx)(l.pOD,{})," Add"]})]}),(0,r.jsx)(a.xu,{height:"12px"}),(0,r.jsx)(a.rj,{columns:"4",gap:"3",children:t.teams.map((e,n)=>(0,r.jsx)(g,{team:e,children:(0,r.jsx)(a.hU,{variant:"outline",className:"absolute right-4 top-4",onClick:()=>{let e=structuredClone(t.teams);e.splice(n,1),u(e)},children:(0,r.jsx)(l.ypG,{})})},e.name))})]})}function f(){let e=(0,o.useRouter)(),[t,n]=(0,s.useState)([]),[d,u]=(0,s.useState)("bracket"),[x,h]=(0,i.Ku)("tournament",{type:"bracket",data:[],teams:[]},e=>{n((0,i.cr)(e)),u(e.type)}),[p,j]=(0,s.useState)("");function m(e){h(e),window.history.pushState(null,"","?tournament="+(0,i.Fc)(e))}function g(){let e=structuredClone(t);e.push(p),n(e),m((0,i.E6)(x,e)),j("")}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.kC,{gap:"3",children:[(0,r.jsxs)(a.J2.Root,{children:[(0,r.jsx)(a.J2.Trigger,{children:(0,r.jsx)(a.zx,{variant:"outline",children:"Change tournament type"})}),(0,r.jsxs)(a.J2.Content,{width:"300px",children:[(0,r.jsx)(a.xv,{children:"This action is irreversible, and it will clear the current tournament state."}),(0,r.jsx)(a.xu,{height:"12px"}),(0,r.jsxs)(a.kC,{justify:"end",gap:"3",children:[(0,r.jsxs)(a.Ph.Root,{value:d,onValueChange:u,children:[(0,r.jsx)(a.Ph.Trigger,{}),(0,r.jsxs)(a.Ph.Content,{children:[(0,r.jsx)(a.Ph.Item,{value:"bracket",children:"Bracket"}),(0,r.jsx)(a.Ph.Item,{value:"roundRobin",children:"Round Robin"})]})]}),(0,r.jsx)(a.J2.Close,{children:(0,r.jsx)(a.zx,{variant:"outline",onClick:()=>{x.type!=d&&(x.type=d,m((0,i.E6)(x,t)))},children:"Change"})})]})]})]}),(0,r.jsx)(a.nv.Root,{placeholder:"Add player / team…",value:p,onChange:e=>{j(e.target.value)},onKeyDown:e=>{"Enter"==e.key&&g()},children:(0,r.jsx)(a.nv.Slot,{children:(0,r.jsx)(l.Tk0,{})})}),(0,r.jsxs)(a.zx,{variant:"outline",onClick:g,children:[(0,r.jsx)(l.pOD,{})," Add"]}),(0,r.jsx)(a.xu,{width:"12px"}),(0,r.jsxs)(a.zx,{variant:"outline",onClick:()=>{let e;navigator.clipboard.writeText((e=new URL(window.location.href)).host+e.pathname+"?tournament="+(0,i.Fc)(x))},children:[(0,r.jsx)(l.dqY,{})," Copy tournament URL"]}),(0,r.jsxs)(a.zx,{variant:"outline",onClick:()=>{e.push("/tournament?tournament="+(0,i.Fc)(x))},children:[(0,r.jsx)(l.yr4,{})," Use in tournament"]}),(0,r.jsx)(a.kC,{className:"grow",justify:"end",children:(0,r.jsxs)(a.zx,{color:"red",variant:"outline",onClick:()=>{let e=[];n(e),m((0,i.E6)(x,e))},children:[(0,r.jsx)(l.ypG,{})," Clear all"]})})]}),(0,r.jsx)(a.xu,{height:"12px"}),(0,r.jsx)(c.Z,{tournament:x}),(0,r.jsx)(a.xu,{height:"12px"}),(0,r.jsx)(y,{tournament:x,players:t,setPlayers:n,setTournament:m}),(0,r.jsx)(a.xu,{height:"24px"}),(0,r.jsx)(v,{tournament:x,setTournament:m})]})}}},function(e){e.O(0,[545,999,853,185,146,672,744],function(){return e(e.s=64679)}),_N_E=e.O()}]);